# 20240801

## 《给产品经理讲技术》2h

### 网络地址转换
* 每一台连接到网络中的网卡，都需要有一个IP，有了它，网卡才可以在网络中收发信息
* 私有地址：只允许被用在私有网络中，不能作为互联网上的接入地址使用
* 私有网络中的设备，如需访问互联网，需要用到 NAT（Network Address Translation 网络地址转换）
    * 静态转换（static NAT）
        * 内网地址与外网地址一一对应，且对应关系固定
        * 内网有一台主机的时候可用
    * 动态转换（Dynamic NAT）
        * 与静态转换类似，但内外网IP对应关系不固定
    * 端口多路复用（Overload）
        * 可实现1个外网IP地址被多个内网IP同时共享
        * 与前两种的区别：将端口作为一个映射的维度
        * 家用的路由器一般通过端口多路复用来实现NAT
* NAT技术
    * 降低了内网主机直接暴露到外网上的安全风险
    * 端口多路复用技术大大减少了IP地址的需求量，减缓了IP地址的枯竭

### ping和网关
- 检查本机的TCP/IP设置是否正确，可以Ping回环地址（`127.0.0.1`），也称“本机地址”
- 用Ping发现网络异常时，要查看网络配置是否正确，方法：

```sh
bash-3.2$ ifconfig en0
en0: flags=8863<UP,BROADCAST,SMART,RUNNING,SIMPLEX,MULTICAST> mtu 1500
        options=400<CHANNEL_IO>
        ether 50:ed:3c:15:9f:a8
        inet6 fe80::1cc8:afc:bd6b:f4f6%en0 prefixlen 64 secured scopeid 0xb 
        inet 172.16.1.188 netmask 0xffff0000 broadcast 172.16.255.255
        nd6 options=201<PERFORMNUD,DAD>
        media: autoselect
        status: active      #联网状态
bash-3.2$ ifconfig en0
en0: flags=8863<UP,BROADCAST,SMART,RUNNING,SIMPLEX,MULTICAST> mtu 1500
        options=400<CHANNEL_IO>
        ether 50:ed:3c:15:9f:a8
        nd6 options=201<PERFORMNUD,DAD>
        media: autoselect
        status: inactive    #未联网状态
```

- 以太网适配器，也称“网卡”，NIC
    - 一种硬件，进行网络传输所用的物理设备，将数据转化为电信号接收/发送
    - 每个网卡在生产时就被赋予了一个 MAC 地址
    - 一台计算机可以有多个网卡
    - 路由器每个端口具有 MAC 地址，也有IP地址，所以路由器也算网卡
- 网关，也称“网间连接器”“协议转换器”, Gateway，作用
    - 桥梁
    - 过滤  
![补充详情](https://blog.csdn.net/Sober_harmonic/article/details/125364085)

### TCP 传输的优点（3条）
- 顺序编号
    - 将大文件分成多个TCP数据包（一般一个装满数据的TCP数据包通常1kB左右）
    - TCP会对每个数据包进行顺序编号，这是提供可靠传输的基础
- 确认机制
    - 接收方会遵循TCP向发送方反馈成功接收的信号 “Acknowledgement, ACK”
- 超时重传
    - 发送方每发送一个数据包，都会为其做一个定时器
    - 如果定时器归零，发送方仍未收到对方的ACK，就会重传该数据包
- 备注：UDP没有确认机制和超时重传

### 反向代理
- 一般的代理
    - 客户端向外界发请求时，将请求交给一个代理服务器，由它负责连接外界的目标服务器
    - 看上去，所有的请求都来自这台代理服务器，客户端在其背后，可以受其保护
- 反向代理
    - 针对服务器的代理服务
    - 反向代理服务器，可以接受客户端的请求，将它分发到被代理的服务器上，这些服务器处理完成请求后，再将结果返回给客户端
    - 代理服务器将服务器隐藏在背后，从客户端角度看，只面对这一台服务器（其实可能背后有很多）
- 反向代理意义
    - 实现负载均衡
        - 多台服务器为一个Web服务时，客户端并不知哪一台比较闲
        - 代理服务器知道每台服务器的负载量，可以把请求转发给相对空闲的，可以更快响应客户端
    - 减轻后端服务器的压力
        - 静态资源或缓存数据，可以直接放在反向代理服务器上
    - 反向代理服务器可以对请求做进一步封装和解封
        - 想升级到SSL加密连接时，可以只在客户端-反向代理服务器之间用SSL加密连接；反向代理服务器-后端服务器的不加，还保持使用http，速度更快
    - 反向代理服务器可以为后端服务器阻挡一些网络攻击

### CDN
- CDN：Content Delivery Network
- 基于互联网的数据量巨大的**服务器集群**，专注于**内容和资源分发**，为用户提供**快速访问资源**的能力，进而提升内容访问的体验
- 开发层面，应用服务器和资源服务器解耦
    - 应用服务器只负责逻辑能力
    - 资源服务器存放内容、资源

### 断点续传背后的故事