
# Day 13 20240731 

## Head First Go语言程序设计 (见golang.md)

## 图解HTTP （继续复习）

- Chapter 5
- Chapter 6 HTTP 首部
- Chapter 7 HTTPS
- Chapter 10 - 前端知识？有点跳
（本书结束）

## 图解HTTP （继续复习）
### Chapter 5
#### 单台虚拟主机实现多个域名
* HTTP/1.1允许一台HTTP服务器搭建多个Web站点，即一台服务器为多位客户服务，原因是利用了**虚拟主机Virtual Host** 的功能
* 一台服务器内托管了多个域名，发送HTTP请求时，必须在Host首部内完整指定主机名或域名的URI
  
#### 通信数据的转发程序 代理、网关、隧道（重点是代理）
* 代理：具有转发功能的应用程序，是Client和Server之间的“中间人”
  * 代理的基本行为是接受客户端发送的请求后转发给其他服务器。
  * 代理不改变请求URI，会直接发送给持有请求资源的目标服务器
  * 使用代理的理由：
      * 利用缓存技术减少网络带宽流泪
      * 组织内部针对特定网站的访问控制，以获取访问日志为主要目的等
* 网关：与代理的工作机制类似
  * 特点
      * 可使通信线路上的服务器提供非HTTP协议
      * 可在客户端与网关的通信线路上加密，提高安全性。如，连接数据库，用SQL查数据；Web页购物，可与信用卡结算系统联动
* 隧道：可建立一条与其他服务器的通信线路，用SSL等手段加密通信。
  * 目的：确保Client和Server的安全通信
  * 注意：本身不解析HTTP，即将请求原样转发给服务器 

#### 缓存
* 代理服务器或客户端本地磁盘内保存的资源副本
* 利用缓存可以：
  * 减少对服务器的访问
  * 节省通信流量和时间

### Chapter 6 HTTP 首部
#### HTTP报文首部
* 报文结构：首部+空行+主体
* 首部结构：首部字段名+冒号+首部字段值

### Chapter 7 HTTPS
#### HTTP的缺点
* 通信不加密，内容可能被窃听
  * 原因：根据TCP/IP协议族的工作机制，通信内容在所有线路上都可能遭到窥视
  * 措施
    * 通信加密-HTTP通过与SSL（Secure Socket Layer 安全套接层）或TLS（Transport Layer Security 安全传输层协议）组合使用
    * 内容加密：对HTTP传输的内容本身加密，即报文首部未加密，但报文主体加密。但内容仍有被篡改的风险
* 不验证通信方的身份，可能遭遇伪装
  * 原因：任何人都可能发起请求，无法确定请求发送至目标服务器、无法确定返回请求是否返回到了发请求的客户端（可能是伪装的客户端）等
  * 措施：查明对手证书。SSL提供了被称为证书的手段，证书一般由值得信任的第三方机构颁发，伪造很困难
* 无法证明报文的完整性，有可能已遭篡改
  * 表现：接收到的内容可能有误
  * 措施：常用的是MD5、SHA-1，都不太好用。过
  
#### HTTPS=HTTP+加密+认证+完整性保护
* SSL采用了**公开密钥加密**的加密方式。
  * 存在的问题：任何人只要持有密钥就能解密，如果被攻击者获得，加密就失去了意义
* HTTPS采用混合加密机制
  * 方式：
    * 1. 先用公开密钥加密方式安全的交换
    * 2. 确保交换的密钥是安全的前提下，使用共享密钥通信
    * 问题：公开密钥仍存在问题，无法证明公开密钥本身就是真正的公开密钥
    * 解决方式：由数字证书认证机构发证书。其中EV SSL证书的作用有2个:
        * 通信方的服务器是否规范
        * 确认对方服务器背后运营的企业是否真实存在
* SSL速度：和http相比，网络负载可能会慢2-100倍
  * 解决办法SSL加速器（硬件改善）
* 为什么仍在使用HTTP：
  * 1. 加密通信HTTPS会消耗更多CPU及内存资源。如果每次都加密，会消耗非常多，相应的可请求的资源也会变少
  * 2. 部分非敏感信息没必要加密
  * 3. 节约HTTPS通信证书的开销
 



# Day 12 20240730 
 
 ## 图解HTTP
how to read this book：skip chapter 5、8、9、11，skim chapter 6
### Chapter 1
#### Web协议和HTTP
* *Web浏览器*通过地址栏指定的*URL*，从*Web服务器*获取文件资源（resource）等信息，从而显示出Web页面
    * URL：Uniform Resource Locator 统一资源定位器
* Web使用一种名为*HTTP*的协议作为规范。That's to say，Web是建立在HTTP协议上通信的
    * HTTP：HyperText Transfer Protocol 超文本传输协议
* HTTP版本：当前主流版本是1997年公布的HTTP/1.1。HTTP/2.0定制中
  
#### TCP/IP
* 通常使用的网络（包括互联网）是在*TCP/IP*协议族的基础上运作的。HTTP是其子集。
* TCP/IP：与互联网相关联的协议集合起来，称为～
* TCP/IP协议族分层：
    * 应用层：决定了向用户提供应用服务时通信的活动。**HTTP**和**DNS**在该层
    * 传输层：提供处于网络连接中两台计算机间的数据传输。传输层有2个性质不同的协议：TCP和UDP
        * TCP Transmission Control Protocol 传输控制协议
        * UDP User Data Protocol 用户数据报协议
    * 网络层：处理网络上流动的数据包。数据包是网络传输的最小数据单位 **IP在该层**
    * 链路层：也称网络接口层。硬件上的范畴均在链路层作用范围内。
* **封装**：发送端层与层传输数据时，每经过一层时必定打上该层所属的首部信息。反之，接收端层间传输数据时，每经过一层会把对应的首部消去。这种把数据信息包装起来的做法称为封装（encapsulate）。#待加图

#### 与HTTP关系密切的协议 之 IP协议
* IP（Internet Protocol）网际协议位于网络层。
    * 注意区分 IP协议和IP地址，两者不是一回事
    * IP协议作用是把数据包传给对方，要保证可以顺利传输，需要很多条件，其中2个很重：IP地址和MAC地址
    * IP地址指明了节点被分配到的地址；MAC地址是网卡所属的固定地址
    * IP地址和MAC地址可以配对；IP地址可变，MAC基本不变
* ARP协议：用以解析地址。可以根据IP地址反查出对应的MAC地址
#### 与HTTP关系密切的协议 之 TCP协议
* TCP位于传输层，提供字节流服务
    * 字节流服务（Byte Stream Service）：为方便传输，将大块数据分隔成以 **报文段（segment）** 为单位的数据报进行管理
* 三次握手 three-way handshaking
    1. 发送端首先发送一个带**SYN**标志的数据报给对方
    2. 接收端收到后，会穿一个带有**SYN/ACK**标志的数据包以示传达确认消息
    3. 最后，发送端再回传一个带**ACK**表示的数据包，代表“握手”结束。
    
    >补充说明：
    > 1. 握手过程中使用了TCP的表示：SYN synchronize 和 ACK acknowledgement  
    > 2. 若在某个阶段莫名中断，TCP协议会再次以相同的顺序发送相同的数据包
#### 负责解析域名的DNS服务
* DNS（Domain Name System）：位于应用层。提供域名到IP地址的解析服务
* DNS 协议可以通过域名查IP，反过来也可以

#### URI和URL

- URI Uniform Resource Identifier：某个协议方案表示的资源的定位表示符
- URI用字符串标识某一互联网资源，而URL表示资源的地点（互联网上所处的位置）。so URL是URI的子集

### Chapter 2
#### 客户端和服务器端
* 请求访问文本或图像等资源的一端为客户端；提供资源响应的一端为服务器端
* 两台计算机作为C/S，两者角色可能会互换
#### 方法
* GET 获取资源
* POST 传输实体主体（entity body）
* PUT 传输文件
* HEAD 获得报文首部
* DELETE 删除文件
* OPTIONS 询问支持的方法
* TRACE 追踪路径
#### 持久链接
* 特点：只要任意一端没有明确提出断开连接，则保持TCP连接状态
* 优点
    * 减少TCP连接的重复建立和断开所造成的额外开销
    * 减轻服务端的负载
    * 减少开销的那部分时间，使HTTP请求和响应能更早地结束，从而使Web页面的显示速度相应地提高了
* HTTP/1.1 都是默认持久链接。1.0内未标准化
#### 管线化
* 持久链接使得多数请求以管线化（pipelining）方式发送成为可能
* 同时并行发送多个请求，而不需要一个接一个地等待相应
* 管线化可以让请求更快结束。请求数越多，时间差就越明显

#### Cookie
* HTTP是无状态协议，不管理之前发生过的请求和响应状态
* Cookie 会根据服务器端发送的响应报文内首部字段为**Set-Cookie**的信息，通知客户端保存cookie。下次客户端再发送请求时，客户端会自动在请求报文中加入Cookie值后发送出去

### Chapter 3
#### HTTP报文
* HTTP报文结构
    * 报文首部：服务器端或客户端需处理的请求或响应的内容及属性
    * 空行（区分首部和主体）
    * 主体：应被发送的数据
* 报文和实体的差异
    * 报文 message，是HTTP通信中的基本单位
    * 实体 entity，作为请求或响应的有效载荷数据被传输。有实体首部和实体报文组成
    * 通常，报文主体=实体主体。只有当传输中编码时，实体主体的内容变化，才会与报文主体产生差异
### Chapter 4
#### 状态码（review）

* 200 OK
* 301 Mover Permanently 永久重定向：说明以后应使用新URI
* 302 临时性重定向：本次用新的URI访问
* 400 Bad request 请求报文中有语法错误
* 401 Unauthorized 请求需要通过认证信息
* 403 Forbidden 对请求资源的访问被服务器拒绝
* 404 Not Found 服务器上无法找到请求的资源
* 500 Internal Server Error 服务器执行请求时发生错误
* 503 Service Unavailable 服务器暂时处于超负载或正在进行停机维护
* 504 Gateway Timeout 网关超时（根据评论补充）


